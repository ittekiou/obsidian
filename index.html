<script>
  function getQueryParam(param) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
  }

  window.onload = () => {
    const path = getQueryParam('path'); // 例: DialogueSeeds/2025/05/20250530
    if (!path) {
      document.body.innerHTML = '<p>衛星 EchoStar 起動完了</p>';
      return;
    }

    const vaultName = 'MyVault'; // ← スマホでのVault名と完全一致に修正！
    const obsidianUrl = `obsidian://open?vault=${encodeURIComponent(vaultName)}&file=${encodeURIComponent(path)}`;

    document.body.innerHTML = `
      <p>「${path}」をObsidianで開きます。</p>
      <p><a href="${obsidianUrl}">ここをクリック</a></p>
      <p>3秒後に自動的に移動します...</p>
    `;
    setTimeout(() => {
      window.location.href = obsidianUrl;
    }, 3000);
  };
</script>
